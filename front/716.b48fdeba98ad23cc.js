"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[716],{1716:(A,u,e)=>{e.r(u),e.d(u,{LoginModule:()=>S});var h=e(6814),a=e(1303),o=e(6223),p=e(8504),m=e(8180),c=e(6306),g=e(9530),t=e(9212),f=e(2169),d=e(8672),v=e(1154);function w(n,l){1&n&&(t.TgZ(0,"div"),t._uU(1,"Email is required"),t.qZA())}function I(n,l){1&n&&(t.TgZ(0,"div"),t._uU(1,"Password is required "),t.qZA())}function Z(n,l){if(1&n){const i=t.EpF();t.TgZ(0,"form",3),t.NdJ("ngSubmit",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.loginUser())}),t.TgZ(1,"div")(2,"h1"),t._uU(3," Login "),t.qZA()(),t.TgZ(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7,"Email"),t.qZA(),t._UZ(8,"input",7),t.qZA(),t.TgZ(9,"div",8),t.YNc(10,w,2,0,"div",9),t.qZA()(),t.TgZ(11,"div",4)(12,"div",5)(13,"label",6),t._uU(14,"Password"),t.qZA(),t._UZ(15,"input",10),t.qZA(),t.TgZ(16,"div",8),t.YNc(17,I,2,0,"div",9),t.qZA()(),t.TgZ(18,"div",11)(19,"button",12),t._uU(20,"Login"),t.qZA()()()}if(2&n){const i=t.oxw();t.Udp("width",i.container_width)("height",i.container_height),t.Q6J("formGroup",i.loginForm),t.xp6(4),t.Udp("width",i.form_input_container_width)("height",i.form_input_container_height),t.xp6(4),t.Q6J("formControl",i.emailInput),t.xp6(2),t.Q6J("ngIf",i.emailInput.invalid&&(i.emailInput.dirty||i.emailInput.touched)),t.xp6(1),t.Udp("width",i.form_input_container_width)("height",i.form_input_container_height),t.xp6(4),t.Q6J("formControl",i.passwordInput),t.xp6(2),t.Q6J("ngIf",i.passwordInput.invalid&&(i.passwordInput.dirty||i.passwordInput.touched))}}function x(n,l){if(1&n&&(t.TgZ(0,"div",13),t._UZ(1,"ngx-spinner",14),t.qZA()),2&n){const i=t.oxw();t.Udp("width",i.container_width)("height",i.container_height),t.xp6(1),t.Q6J("fullScreen",!1)}}const T=[{path:"",component:(()=>{class n{constructor(i,r,s,U,y){this.router=i,this.store=r,this.spinner=s,this.formBuilder=U,this.authServ=y,this.loadingState=!1,this.container_width=window.innerWidth<=700?"95%":"50%",this.container_height=window.innerWidth<=700?"75%":"50%",this.form_input_container_width=window.innerWidth<=700?"100%":"50%",this.form_input_container_height=(window,"20%"),this.loginForm=this.formBuilder.group({email:new o.NI("",[o.kI.required,o.kI.email]),password:new o.NI("",[o.kI.required])})}ngOnInit(){this.store.select(g.d).subscribe(i=>{this.user=i})}get emailInput(){return this.loginForm.get("email")}get passwordInput(){return this.loginForm.get("password")}handleError(i){return 0===i.status?console.error("An error occurred:",i.error):console.error(`Backend returned code ${i.status}, body was: `,i.error),(0,p._)(()=>new Error("Something bad happened; please try again later."))}loginUser(){this.spinner.show("primary"),this.loadingState=!0,this.authServ.login(this.emailInput.value,this.passwordInput.value).pipe((0,m.q)(1)).pipe((0,c.K)(this.handleError)).subscribe(i=>{setTimeout(()=>{i?(this.spinner.hide(),this.loadingState=!1,this.authServ.setPermissions(i.jwt),this.router.navigate(["/user",this.user.id])):console.log("Password or Email Incorrect ! ")},3e3)})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(a.F0),t.Y36(f.yh),t.Y36(d.t2),t.Y36(o.qu),t.Y36(v.e))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:3,vars:2,consts:[[1,"login-page"],["action","","class","login-form",3,"formGroup","width","height","ngSubmit",4,"ngIf"],["class","login-form",3,"width","height",4,"ngIf"],["action","",1,"login-form",3,"formGroup","ngSubmit"],[1,"form-input-container"],[1,"form-input"],["for","email",1,"input-label"],["id","email","placeholder","Email","name","email","type","text","required","",1,"input-box",3,"formControl"],[1,"input-errors"],[4,"ngIf"],["placeholder","Password","type","text","required","",1,"input-box",3,"formControl"],[1,"btn-container"],["type","submit",1,"submit-btn"],[1,"login-form"],["size","small","template","<img src='../../../assets/bluedots-transparent.gif' />","bdColor","transparent",1,"spinner",3,"fullScreen"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0),t.YNc(1,Z,21,17,"form",1)(2,x,2,5,"div",2),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",!s.loadingState),t.xp6(1),t.Q6J("ngIf",s.loadingState))},dependencies:[h.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.oH,o.sg,d.Ro]})}return n})()}];let C=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#i=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(T),a.Bz]})}return n})(),S=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#i=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[h.ez,C,o.UX,o.u5,d.ef,a.Bz]})}return n})()}}]);