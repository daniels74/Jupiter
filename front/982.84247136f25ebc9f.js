"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[982],{982:(O,m,s)=>{s.r(m),s.d(m,{RegisterModule:()=>Q});var h=s(6814),p=s(4190),t=s(9212),r=s(6223),d=s(3019),v=s(4664),w=s(9530),u=s(1993),g=s(8672),x=s(1154),_=s(173),Z=s(5470),c=s(2032),l=s(9157),f=s(2296);function T(e,n){1&e&&(t.TgZ(0,"div",8),t._UZ(1,"img",9),t.qZA())}function I(e,n){1&e&&(t.TgZ(0,"div",8),t._UZ(1,"img",10),t.qZA())}function C(e,n){if(1&e&&(t.TgZ(0,"div",6),t.YNc(1,T,2,0,"div",7)(2,I,2,0,"div",7),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.lightTheme),t.xp6(1),t.Q6J("ngIf",i.lightTheme)}}function b(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"img",13),t.qZA())}function R(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"img",14),t.qZA())}function A(e,n){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,b,2,0,"div",12)(2,R,2,0,"div",12),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.lightTheme),t.xp6(1),t.Q6J("ngIf",i.lightTheme)}}function M(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.Oqu(i.emailErrorMessage())}}function S(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.Oqu(i.passwordErrorMessage())}}function U(e,n){1&e&&(t.TgZ(0,"button",19),t._uU(1,"Register"),t.qZA())}function E(e,n){1&e&&(t.TgZ(0,"button",20),t._uU(1,"Register"),t.qZA())}function J(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"form",15),t.NdJ("ngSubmit",function(){t.CHM(i);const a=t.oxw();return t.KtG(a.registerUser())}),t.TgZ(1,"div")(2,"h1"),t._uU(3,"Register"),t.qZA()(),t.TgZ(4,"mat-form-field",16)(5,"mat-label"),t._uU(6,"Email"),t.qZA(),t._UZ(7,"input",17),t.YNc(8,M,2,1,"mat-error"),t.qZA(),t.TgZ(9,"mat-form-field",16)(10,"mat-label"),t._uU(11,"Password"),t.qZA(),t._UZ(12,"input",17),t.YNc(13,S,2,1,"mat-error"),t.qZA(),t.TgZ(14,"div",18),t.YNc(15,U,2,0,"button",19)(16,E,2,0),t.qZA()()}if(2&e){const i=t.oxw();t.Udp("width",i.container_width)("height",i.container_height),t.Q6J("formGroup",i.registerForm),t.xp6(4),t.Udp("width",i.form_input_container_width)("height",i.form_input_container_height),t.xp6(3),t.Q6J("formControl",i.emailInput),t.xp6(1),t.um2(8,i.emailInput.invalid?8:-1),t.xp6(1),t.Udp("width",i.form_input_container_width)("height",i.form_input_container_height),t.xp6(3),t.Q6J("formControl",i.passwordInput),t.xp6(1),t.um2(13,i.passwordInput.invalid?13:-1),t.xp6(2),t.um2(15,i.emailInput.invalid?15:16)}}function y(e,n){if(1&e&&(t.TgZ(0,"div",21),t._UZ(1,"ngx-spinner",22),t.qZA()),2&e){const i=t.oxw();t.Udp("width",i.container_width)("height",i.container_height),t.xp6(1),t.Q6J("fullScreen",!1)}}const Y=[{path:"",component:(()=>{class e{constructor(i,o,a,q,F,j){this.spinner=i,this.authServ=o,this.formBuilder=a,this.router=q,this.store=F,this.siteAdjustments=j,this.loadingState=!1,this.container_width=window.innerWidth<=700?"95%":"50%",this.container_height=window.innerWidth<=700?"75%":"50%",this.form_input_container_width=window.innerWidth<=700?"80%":"50%",this.form_input_container_height=window.innerWidth<=700?"10%":"20%",this.emailErrorMessage=(0,t.tdS)(""),this.passwordErrorMessage=(0,t.tdS)(""),this.sizeState=!(window.innerWidth<700),this.lightTheme=!0,this.registerForm=this.formBuilder.group({email:new r.NI("",[r.kI.required]),password:new r.NI("",[r.kI.required])}),(0,d.T)(this.emailInput.statusChanges,this.emailInput.valueChanges).pipe((0,u.sL)()).subscribe(()=>{this.updateEmailErrorMsg()}),(0,d.T)(this.passwordInput.statusChanges,this.passwordInput.valueChanges).pipe((0,u.sL)()).subscribe(()=>{this.updatePasswordErrorMesg()})}ngOnInit(){this.store.select(w.d).subscribe(i=>{this.user=i}),this.siteAdjustments.myValue$.subscribe(i=>{this.lightTheme=i})}get emailInput(){return this.registerForm.get("email")}get passwordInput(){return this.registerForm.get("password")}updateEmailErrorMsg(){this.emailInput.hasError("required")?this.emailErrorMessage.set("You must enter a value"):this.emailInput.hasError("email")?this.emailErrorMessage.set("Not a valid email"):this.emailErrorMessage.set("")}updatePasswordErrorMesg(){this.passwordInput.hasError("required")?this.passwordErrorMessage.set("You must enter a value"):this.passwordErrorMessage.set("")}registerUser(){this.spinner.show("primary"),this.loadingState=!0,this.authServ.register(this.emailInput.value,this.passwordInput.value).pipe((0,v.w)(i=>(console.log("Usercreated",i),this.authServ.login(this.emailInput.value,this.passwordInput.value)))).subscribe(i=>{setTimeout(()=>{this.spinner.hide(),this.loadingState=!1,this.authServ.setPermissions(i.jwt),this.router.navigate(["/user",this.user.id])},3e3)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(g.t2),t.Y36(x.e),t.Y36(r.qu),t.Y36(p.F0),t.Y36(_.yh),t.Y36(Z.c))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],decls:6,vars:4,consts:[[1,"wallpaper-login"],["class","big-screen-wallpaper",4,"ngIf"],["class","small-screen",4,"ngIf"],[1,"register-page"],["action","","class","register-form",3,"formGroup","width","height","ngSubmit",4,"ngIf"],["class","login-form",3,"width","height",4,"ngIf"],[1,"big-screen-wallpaper"],["class","wallpaper-img-wrapper",4,"ngIf"],[1,"wallpaper-img-wrapper"],["src","assets/darkmode.webp","alt","",1,"wallpaper-img"],["src","assets/daylight.png","alt","",1,"wallpaper-img"],[1,"small-screen"],[4,"ngIf"],["src","assets/darkmode.webp","alt",""],["src","assets/daylight.png","alt",""],["action","",1,"register-form",3,"formGroup","ngSubmit"],["appearance","outline","color","accent",1,"form-field"],["matInput","","type","text","required","",3,"formControl"],[1,"btn-container"],["mat-raised-button","","color","warn","type","submit"],["mat-raised-button","","color","primary","type","submit"],[1,"login-form"],["size","medium","template","<img src='../../../assets/bluedots-transparent.gif' />","bdColor","transparent",1,"spinner",3,"fullScreen"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t.YNc(1,C,3,2,"div",1)(2,A,3,2,"div",2),t.qZA(),t.TgZ(3,"div",3),t.YNc(4,J,17,18,"form",4)(5,y,2,5,"div",5),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",a.sizeState),t.xp6(1),t.Q6J("ngIf",!a.sizeState),t.xp6(2),t.Q6J("ngIf",!a.loadingState),t.xp6(1),t.Q6J("ngIf",a.loadingState))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.oH,r.sg,h.O5,g.Ro,c.Nt,l.KE,l.hX,l.TO,f.lW],styles:[".wallpaper-login[_ngcontent-%COMP%]{position:absolute;height:100vh;width:100vw;top:0;left:0;overflow:hidden;z-index:-1}.big-screen-wallpaper[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;background-color:#000}.wallpaper-img-wrapper[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;overflow:hidden;background-color:#000}.wallpaper-img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;object-fit:cover;display:block}"]})}return e})()}];let N=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(Y),p.Bz]})}return e})(),Q=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[r.UX,r.u5,h.ez,N,g.ef,c.c,l.lN,f.ot]})}return e})()}}]);